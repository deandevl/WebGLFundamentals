const t=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],e=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0];var n="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;var o=Math.PI/180;function a(t){return t*o}function i(){var t=new n(16);return n!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function r(t,e){var n=e[0],o=e[1],a=e[2],i=e[3],r=e[4],s=e[5],u=e[6],c=e[7],l=e[8],m=e[9],v=e[10],_=e[11],f=e[12],h=e[13],g=e[14],d=e[15],p=n*s-o*r,x=n*u-a*r,E=n*c-i*r,y=o*u-a*s,L=o*c-i*s,C=a*c-i*u,I=l*h-m*f,B=l*g-v*f,M=l*d-_*f,A=m*g-v*h,w=m*d-_*h,b=v*d-_*g,T=p*b-x*w+E*A+y*M-L*B+C*I;return T?(T=1/T,t[0]=(s*b-u*w+c*A)*T,t[1]=(a*w-o*b-i*A)*T,t[2]=(h*C-g*L+d*y)*T,t[3]=(v*L-m*C-_*y)*T,t[4]=(u*M-r*b-c*B)*T,t[5]=(n*b-a*M+i*B)*T,t[6]=(g*E-f*C-d*x)*T,t[7]=(l*C-v*E+_*x)*T,t[8]=(r*w-s*M+c*I)*T,t[9]=(o*M-n*w-i*I)*T,t[10]=(f*L-h*E+d*p)*T,t[11]=(m*E-l*L-_*p)*T,t[12]=(s*B-r*A-u*I)*T,t[13]=(n*A-o*B+a*I)*T,t[14]=(h*x-f*y-g*p)*T,t[15]=(l*y-m*x+v*p)*T,t):null}function s(t,e,n){var o=e[0],a=e[1],i=e[2],r=e[3],s=e[4],u=e[5],c=e[6],l=e[7],m=e[8],v=e[9],_=e[10],f=e[11],h=e[12],g=e[13],d=e[14],p=e[15],x=n[0],E=n[1],y=n[2],L=n[3];return t[0]=x*o+E*s+y*m+L*h,t[1]=x*a+E*u+y*v+L*g,t[2]=x*i+E*c+y*_+L*d,t[3]=x*r+E*l+y*f+L*p,x=n[4],E=n[5],y=n[6],L=n[7],t[4]=x*o+E*s+y*m+L*h,t[5]=x*a+E*u+y*v+L*g,t[6]=x*i+E*c+y*_+L*d,t[7]=x*r+E*l+y*f+L*p,x=n[8],E=n[9],y=n[10],L=n[11],t[8]=x*o+E*s+y*m+L*h,t[9]=x*a+E*u+y*v+L*g,t[10]=x*i+E*c+y*_+L*d,t[11]=x*r+E*l+y*f+L*p,x=n[12],E=n[13],y=n[14],L=n[15],t[12]=x*o+E*s+y*m+L*h,t[13]=x*a+E*u+y*v+L*g,t[14]=x*i+E*c+y*_+L*d,t[15]=x*r+E*l+y*f+L*p,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var u=function(t,e,n,o,a){var i,r=1/Math.tan(e/2);return t[0]=r/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(i=1/(o-a),t[10]=(a+o)*i,t[14]=2*a*o*i):(t[10]=-1,t[14]=-2*o),t};var c=function(t,e,n,o,a,i,r){var s=1/(e-n),u=1/(o-a),c=1/(i-r);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(a+o)*u,t[14]=(r+i)*c,t[15]=1,t};function l(t,e,n,o){var a=e[0],i=e[1],r=e[2],s=o[0],u=o[1],c=o[2],l=a-n[0],m=i-n[1],v=r-n[2],_=l*l+m*m+v*v;_>0&&(l*=_=1/Math.sqrt(_),m*=_,v*=_);var f=u*v-c*m,h=c*l-s*v,g=s*m-u*l;return(_=f*f+h*h+g*g)>0&&(f*=_=1/Math.sqrt(_),h*=_,g*=_),t[0]=f,t[1]=h,t[2]=g,t[3]=0,t[4]=m*g-v*h,t[5]=v*f-l*g,t[6]=l*h-m*f,t[7]=0,t[8]=l,t[9]=m,t[10]=v,t[11]=0,t[12]=a,t[13]=i,t[14]=r,t[15]=1,t}class m{constructor(t,e,n,o){this.gl=t,this.type=e,this.attributeLocation=this.gl.getAttribLocation(n,o),this.buffer=this.gl.createBuffer()}bufferFormat(t,e,n,o){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer),this.gl.vertexAttribPointer(this.attributeLocation,t,this.type,e,n,o),this.gl.enableVertexAttribArray(this.attributeLocation)}setData(t,e){switch(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer),this.type){case this.gl.FLOAT:this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(t),e);break;case this.gl.UNSIGNED_BYTE:this.gl.bufferData(this.gl.ARRAY_BUFFER,new Uint8Array(t),e)}}}class v{static getOrthoMatrix(t,e,n,o,a,r){const s=i();return c(s,t,e,n,o,a,r),s}static getPerspectiveMatrix(t,e,n,o){const r=i();return u(r,a(t),e,n,o),r}static getTranslationMatrix(t){const e=i();var n,o;return o=t,(n=e)[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=o[0],n[13]=o[1],n[14]=o[2],n[15]=1,e}static getXYZRotationMatrix(t,e){const n=i();var o,r,s,u;return"x"===t?(o=n,r=a(e),s=Math.sin(r),u=Math.cos(r),o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=u,o[6]=s,o[7]=0,o[8]=0,o[9]=-s,o[10]=u,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1):"y"===t?function(t,e){var n=Math.sin(e),o=Math.cos(e);t[0]=o,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(n,a(e)):"z"===t&&function(t,e){var n=Math.sin(e),o=Math.cos(e);t[0]=o,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(n,a(e)),n}static getScaleMatrix(t){const e=i();var n,o;return o=t,(n=e)[0]=o[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=o[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=o[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,e}}class _{constructor(t,e,n,o){this.gl=t,this.type=o,this.uniformLocation=t.getUniformLocation(e,n)}setData(...t){switch(this.type){case"uniform1f":this.gl.uniform1f(this.uniformLocation,t[0]);break;case"uniform2f":this.gl.uniform2f(this.uniformLocation,t[0],t[1]);break;case"uniform4f":this.gl.uniform4f(this.uniformLocation,t[0],t[1],t[2],t[3]);break;case"uniform2fv":this.gl.uniform2fv(this.uniformLocation,t[0]);break;case"uniform3fv":this.gl.uniform3fv(this.uniformLocation,t[0]);break;case"uniform4fv":this.gl.uniform4fv(this.uniformLocation,t[0]);break;case"uniformMatrix3fv":this.gl.uniformMatrix3fv(this.uniformLocation,!1,t[0]);break;case"uniformMatrix4fv":this.gl.uniformMatrix4fv(this.uniformLocation,!1,t[0]);break;default:throw new Error(`UniformClass: function ${this.type} has not been implemented.`)}}}function f(t,e,n){const o=t.createShader(e);t.shaderSource(o,n),t.compileShader(o);if(t.getShaderParameter(o,t.COMPILE_STATUS))return o;{const e=t.getShaderInfoLog(o);throw t.deleteShader(o),new Error("createShader: "+e)}}function h(t,e){let n=[];for(let o=0;o<4;++o){n[o]=0;for(let a=0;a<4;++a)n[o]+=t[a]*e[4*a+o]}return n}try{const n=function(t,e="webgl2",n){const o=document.getElementById(t);if(!o)throw new Error(`createGLContext: Could not locate canvas element with id ${t}`);return{gl:o.getContext(e,n),canvas:o}}("my_canvas"),o=n.gl,u=n.canvas;o.enable(o.DEPTH_TEST),o.enable(o.CULL_FACE),o.depthFunc(o.LEQUAL),function(t){const e=t.clientWidth,n=t.clientHeight,o=t.width!==e||t.height!==n;o&&(t.width=e,t.height=n)}(u),o.viewport(0,0,o.canvas.width,o.canvas.height);const c=f(o,o.VERTEX_SHADER,"#version 300 es\n\nin vec4 a_position_v4;\nin vec3 a_normal_v3;\n\nuniform vec3 u_lightPosition_v3;       // position light vector\n\nuniform mat4 u_trs_m4;                    // translate/rotate/scale matrix of target\nuniform mat4 u_trsViewPerspective_m4;     // u_trs_m4 * view_m4 * perspective_m4\nuniform mat4 u_trsInverseTranspose_m4;    // transpose(inverse(u_trs_m4))\n\nout vec3 v_normal_v3;\nout vec3 v_surfaceToLight_v3;\n\nvoid main() {\n  // Multiply the position by the u_trs_m4 * view_m4 * perspective_m4 matrices\n  gl_Position = u_trsViewPerspective_m4 * a_position_v4;\n\n  // Orient the normals and pass to the fragment shader\n  v_normal_v3 = mat3(u_trsInverseTranspose_m4) * a_normal_v3;\n\n  // Compute the u_trs_m4 position of the surface\n  vec3 surfaceTrsPosition_v3 = (u_trs_m4 * a_position_v4).xyz;\n\n  // Compute the vector of the surface to the light\n  //   and pass it to the fragment shader\n  v_surfaceToLight_v3 = u_lightPosition_v3 - surfaceTrsPosition_v3;\n}"),y=f(o,o.FRAGMENT_SHADER,"#version 300 es\n\nprecision highp float;\n\n// Passed in from the vertex shader\nin vec3 v_normal_v3;\nin vec3 v_surfaceToLight_v3;\nout vec4 outColor_v4;\n\nuniform vec4 u_color_v4;\nuniform vec3 u_lightDirection_v3;\nuniform float u_lightLimit_f;\n\nvoid main() {\n  // Because v_normal is a varying it's interpolated,\n  //   so it will not be a unit vector.  Normalizing\n  //   it will make it a unit vector again.\n  vec3 normal_v3 = normalize(v_normal_v3);\n\n  vec3 surfaceToLightDirection_v3 = normalize(v_surfaceToLight_v3);\n\n  float light_f = 0.0;\n  float dotFromDirection = 1.0;\n  float dotFromDirection_f = dot(surfaceToLightDirection_v3, -u_lightDirection_v3);\n  if(dotFromDirection >= u_lightLimit_f){\n    light_f = dot(normal_v3, surfaceToLightDirection_v3);\n  }\n\n  outColor_v4 = u_color_v4;\n\n  // Lets multiply just the color portion (not the alpha)\n  //   by the light.\n  outColor_v4.rgb *= light_f;\n}"),L=function(t,e,n){const o=t.createProgram();if(t.attachShader(o,e),t.attachShader(o,n),t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS))return o;{const e=t.getProgramInfoLog(o);throw t.deleteProgram(o),new Error("createProgram: "+e)}}(o,c,y);o.useProgram(L);const C=o.FLOAT,I=new m(o,C,L,"a_position_v4"),B=v.getXYZRotationMatrix("x",180);s(B,B,v.getTranslationMatrix([-50,-75,-15]));for(let e=0;e<t.length;e+=3){const n=h([t[e],t[e+1],t[e+2],1],B);t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2]}I.setData(t,o.STATIC_DRAW);const M=o.FLOAT,A=new m(o,M,L,"a_normal_v3");A.setData(e,o.STATIC_DRAW);const w=o.createVertexArray();o.bindVertexArray(w);{const t=3,e=!1,n=0,o=0;I.bufferFormat(t,e,n,o)}{const t=3,e=!1,n=0,o=0;A.bufferFormat(t,e,n,o)}const b=new _(o,L,"u_trs_m4","uniformMatrix4fv"),T=new _(o,L,"u_trsViewPerspective_m4","uniformMatrix4fv"),D=new _(o,L,"u_trsInverseTranspose_m4","uniformMatrix4fv"),R=new _(o,L,"u_lightPosition_v3","uniform3fv"),F=[40,60,120];R.setData(F);new _(o,L,"u_color_v4","uniform4fv").setData([.2,1,.2,1]);const P=new _(o,L,"u_lightDirection_v3","uniform3fv");P.setData([0,0,1]);const S=new _(o,L,"u_lightLimit_f","uniform1f");let U=10;S.setData(a(U));const z=[0,0,200],Y=[0,35,0],k=[0,1,0],O=i();l(O,z,Y,k);const N=i();r(N,O);const V=o.TRIANGLES,H=0,X=96;let Z=[0,0,0],G=[0,0,0],W=[1,1,1],q=100;const $=o.canvas.clientWidth/o.canvas.clientHeight,j=1,K=2e3;let Q=[0,0];function g(){!function(t,e=[0,0,0,1]){t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.clearColor(e[0],e[1],e[2],e[3]),t.clearDepth(1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}(o,[1,1,0,.5]);const t=v.getTranslationMatrix(Z),e=v.getXYZRotationMatrix("x",G[0]),n=v.getXYZRotationMatrix("y",G[1]),u=v.getXYZRotationMatrix("z",G[2]),c=v.getScaleMatrix(W),m=i();s(m,t,e),s(m,m,n),s(m,m,u),s(m,m,c),b.setData(m);const _=v.getPerspectiveMatrix(q,$,j,K),f=i();s(f,_,N);const h=i();s(h,f,m),T.setData(h);const g=i();r(g,m);const d=i();!function(t,e){if(t===e){var n=e[1],o=e[2],a=e[3],i=e[6],r=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=o,t[9]=i,t[11]=e[14],t[12]=a,t[13]=r,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(d,g),D.setData(d);const p=i();l(p,F,Y,k);const x=v.getXYZRotationMatrix("x",Q[0]),E=v.getXYZRotationMatrix("y",Q[1]);s(p,p,x),s(p,p,E),P.setData([-p[8],-p[9],-p[10]]),S.setData(Math.cos(a(U))),o.drawArrays(V,H,X)}function d(t,e){Z[t]=e,g()}function p(t,e){G[t]=e,g()}function x(t,e){W[t]=e,g()}function E(t,e){Q[t]=e,g()}const J=document.getElementById("fieldOfView"),tt=document.getElementById("fieldOfView_output");J.step=.2,J.min=1,J.max=179,J.value=q,tt.textContent=q,J.addEventListener("input",(()=>{const t=+J.value;tt.textContent=J.value,q=t,g()}));const et=document.getElementById("x_translate"),nt=document.getElementById("y_translate"),ot=document.getElementById("z_translate"),at=document.getElementById("x_translate_output"),it=document.getElementById("y_translate_output"),rt=document.getElementById("z_translate_output");et.min=-200,et.max=200,et.step=2,et.value=Z[0],at.textContent=Z[0],nt.min=-200,nt.max=200,nt.step=2,nt.value=Z[1],it.textContent=Z[1],ot.min=-1e3,ot.max=0,ot.step=5,ot.value=Z[2],rt.textContent=Z[2],et.addEventListener("input",(()=>{const t=+et.value;at.textContent=t,d(0,t)})),nt.addEventListener("input",(()=>{const t=+nt.value;it.textContent=t,d(1,t)})),ot.addEventListener("input",(()=>{const t=+ot.value;rt.textContent=t,d(2,t)}));const st=document.getElementById("x_rotate"),ut=document.getElementById("y_rotate"),ct=document.getElementById("z_rotate"),lt=document.getElementById("x_rotate_output"),mt=document.getElementById("y_rotate_output"),vt=document.getElementById("z_rotate_output");st.step=ut.step=ct.step=5,st.min=ut.min=ct.min=0,st.max=ut.max=ct.max=360,st.value=lt.textContent=G[0],ut.value=mt.textContent=G[1],ct.value=vt.textContent=G[2],st.addEventListener("input",(()=>{const t=+st.value;lt.textContent=t,p(0,t)})),ut.addEventListener("input",(()=>{const t=+ut.value;mt.textContent=t,p(1,t)})),ct.addEventListener("input",(()=>{const t=+ct.value;vt.textContent=t,p(2,t)}));const _t=document.getElementById("x_scale"),ft=document.getElementById("y_scale"),ht=document.getElementById("z_scale"),gt=document.getElementById("x_scale_output"),dt=document.getElementById("y_scale_output"),pt=document.getElementById("z_scale_output");_t.step=ft.step=ht.step=.1,_t.min=ft.min=ht.min=-5,_t.max=ft.max=ht.max=5,_t.value=gt.textContent=W[0],ft.value=dt.textContent=W[1],ht.value=pt.textContent=W[2],_t.addEventListener("input",(()=>{const t=+_t.value;gt.textContent=t,x(0,t)})),ft.addEventListener("input",(()=>{const t=+ft.value;dt.textContent=t,x(1,t)})),ht.addEventListener("input",(()=>{const t=+ht.value;pt.textContent=t,x(2,t)}));const xt=document.getElementById("x_light_rotate"),Et=document.getElementById("y_light_rotate"),yt=document.getElementById("x_light_rotate_output"),Lt=document.getElementById("y_light_rotate_output");xt.value=yt.textContent=Q[0],Et.value=Lt.textContent=Q[1],xt.step=Et.step=.1,xt.min=Et.min=-2,xt.max=Et.max=2,xt.addEventListener("input",(()=>{const t=+xt.value;yt.textContent=t,E(0,t)})),Et.addEventListener("input",(()=>{const t=+Et.value;Lt.textContent=t,E(1,t)}));const Ct=document.getElementById("light_limit"),It=document.getElementById("light_limit_output");Ct.value=It.textContent=U,Ct.step=.2,Ct.min=0,Ct.max=180,Ct.addEventListener("input",(()=>{const t=+Ct.value;It.textContent=t,U=t,g()})),g()}catch(t){console.log(t)}
//# sourceMappingURL=index.a7de04ab.js.map
