const t=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],e=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0];var n="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;var a=Math.PI/180;function r(t){return t*a}function o(){var t=new n(16);return n!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function i(t,e){var n=e[0],a=e[1],r=e[2],o=e[3],i=e[4],s=e[5],c=e[6],u=e[7],l=e[8],m=e[9],h=e[10],f=e[11],v=e[12],d=e[13],g=e[14],_=e[15],p=n*s-a*i,x=n*c-r*i,y=n*u-o*i,E=a*c-r*s,A=a*u-o*s,L=r*u-o*c,M=l*d-m*v,B=l*g-h*v,w=l*_-f*v,b=m*g-h*d,I=m*_-f*d,C=h*_-f*g,F=p*C-x*I+y*b+E*w-A*B+L*M;return F?(F=1/F,t[0]=(s*C-c*I+u*b)*F,t[1]=(r*I-a*C-o*b)*F,t[2]=(d*L-g*A+_*E)*F,t[3]=(h*A-m*L-f*E)*F,t[4]=(c*w-i*C-u*B)*F,t[5]=(n*C-r*w+o*B)*F,t[6]=(g*y-v*L-_*x)*F,t[7]=(l*L-h*y+f*x)*F,t[8]=(i*I-s*w+u*M)*F,t[9]=(a*w-n*I-o*M)*F,t[10]=(v*A-d*y+_*p)*F,t[11]=(m*y-l*A-f*p)*F,t[12]=(s*B-i*b-c*M)*F,t[13]=(n*b-a*B+r*M)*F,t[14]=(d*x-v*E-g*p)*F,t[15]=(l*E-m*x+h*p)*F,t):null}function s(t,e,n){var a=e[0],r=e[1],o=e[2],i=e[3],s=e[4],c=e[5],u=e[6],l=e[7],m=e[8],h=e[9],f=e[10],v=e[11],d=e[12],g=e[13],_=e[14],p=e[15],x=n[0],y=n[1],E=n[2],A=n[3];return t[0]=x*a+y*s+E*m+A*d,t[1]=x*r+y*c+E*h+A*g,t[2]=x*o+y*u+E*f+A*_,t[3]=x*i+y*l+E*v+A*p,x=n[4],y=n[5],E=n[6],A=n[7],t[4]=x*a+y*s+E*m+A*d,t[5]=x*r+y*c+E*h+A*g,t[6]=x*o+y*u+E*f+A*_,t[7]=x*i+y*l+E*v+A*p,x=n[8],y=n[9],E=n[10],A=n[11],t[8]=x*a+y*s+E*m+A*d,t[9]=x*r+y*c+E*h+A*g,t[10]=x*o+y*u+E*f+A*_,t[11]=x*i+y*l+E*v+A*p,x=n[12],y=n[13],E=n[14],A=n[15],t[12]=x*a+y*s+E*m+A*d,t[13]=x*r+y*c+E*h+A*g,t[14]=x*o+y*u+E*f+A*_,t[15]=x*i+y*l+E*v+A*p,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var c=function(t,e,n,a,r){var o,i=1/Math.tan(e/2);return t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(o=1/(a-r),t[10]=(r+a)*o,t[14]=2*r*a*o):(t[10]=-1,t[14]=-2*a),t};var u=function(t,e,n,a,r,o,i){var s=1/(e-n),c=1/(a-r),u=1/(o-i);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(r+a)*c,t[14]=(i+o)*u,t[15]=1,t};function l(t,e,n){const a=t.createShader(e);t.shaderSource(a,n),t.compileShader(a);if(t.getShaderParameter(a,t.COMPILE_STATUS))return a;{const e=t.getShaderInfoLog(a);throw t.deleteShader(a),new Error(`HelperFunctions-createShader-Error: ${e}`)}}class m{constructor(t,e,n,a){this.gl=t,this.buffer_type="ARRAY",this.data_type=e,this.attributeLocation=this.gl.getAttribLocation(n,a),this.arrayBuffer=this.gl.createBuffer()}bufferFormat(t,e,n,a){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.arrayBuffer),this.gl.vertexAttribPointer(this.attributeLocation,t,this.data_type,e,n,a),this.gl.enableVertexAttribArray(this.attributeLocation)}setData(t,e){let n;if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.arrayBuffer),n=t,"number"==typeof t[0]){n=new Array(t.length);for(let e=0;e<t.length;e++)n[e]=t[e]}else if(Array.isArray(t)){n=new Array(t.length*t[0].length);for(let e=0;e<t.length;e++)for(let a=0;a<t[0].length;a++)n[e*t[0].length+a]=t[e][a]}switch(this.data_type){case this.gl.FLOAT:this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(n),e);break;case this.gl.UNSIGNED_BYTE:this.gl.bufferData(this.gl.ARRAY_BUFFER,new Uint8Array(n),e)}}delete(){this.gl.deleteBuffer(this.arrayBuffer)}}class h{static getOrthoMatrix(t,e,n,a,r,i){const s=o();return u(s,t,e,n,a,r,i),s}static getPerspectiveMatrix(t,e,n,a){const i=o();return c(i,r(t),e,n,a),i}static getTranslationMatrix(t){const e=o();var n,a;return a=t,(n=e)[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=a[0],n[13]=a[1],n[14]=a[2],n[15]=1,e}static getRotationMatrix(t,e){const n=o();var a,i,s,c,u,l,m,h,f,v;return a=n,i=r(t),m=(s=e)[0],h=s[1],f=s[2],!((v=Math.hypot(m,h,f))<1e-6)&&(m*=v=1/v,h*=v,f*=v,c=Math.sin(i),l=1-(u=Math.cos(i)),a[0]=m*m*l+u,a[1]=h*m*l+f*c,a[2]=f*m*l-h*c,a[3]=0,a[4]=m*h*l-f*c,a[5]=h*h*l+u,a[6]=f*h*l+m*c,a[7]=0,a[8]=m*f*l+h*c,a[9]=h*f*l-m*c,a[10]=f*f*l+u,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1),n}static getXYZRotationMatrix(t,e){const n=o();var a,i,s,c;return"x"===t?(a=n,i=r(e),s=Math.sin(i),c=Math.cos(i),a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=c,a[6]=s,a[7]=0,a[8]=0,a[9]=-s,a[10]=c,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1):"y"===t?function(t,e){var n=Math.sin(e),a=Math.cos(e);t[0]=a,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(n,r(e)):"z"===t&&function(t,e){var n=Math.sin(e),a=Math.cos(e);t[0]=a,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(n,r(e)),n}static getScaleMatrix(t){const e=o();var n,a;return a=t,(n=e)[0]=a[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=a[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,e}}class f{constructor(t,e,n,a){this.gl=t,this.data_type=a,this.data=null,this.uniformLocation=t.getUniformLocation(e,n)}setData(...t){switch(this.data_type){case"uniform1i":this.gl.uniform1i(this.uniformLocation,t[0]),this.data=t[0];break;case"uniform1f":this.gl.uniform1f(this.uniformLocation,t[0]),this.data=t[0];break;case"uniform2f":this.gl.uniform2f(this.uniformLocation,t[0],t[1]),this.data=[t[0],t[1]];break;case"uniform4f":this.gl.uniform4f(this.uniformLocation,t[0],t[1],t[2],t[3]),this.data=[t[0],t[1],t[2],t[3]];break;case"uniform2fv":this.gl.uniform2fv(this.uniformLocation,t[0]),this.data=t[0];break;case"uniform3fv":this.gl.uniform3fv(this.uniformLocation,t[0]),this.data=t[0];break;case"uniform4fv":this.gl.uniform4fv(this.uniformLocation,t[0]),this.data=t[0];break;case"uniformMatrix3fv":this.gl.uniformMatrix3fv(this.uniformLocation,!1,t[0]),this.data=t[0];break;case"uniformMatrix4fv":this.gl.uniformMatrix4fv(this.uniformLocation,!1,t[0]),this.data=t[0];break;default:throw new Error(`UniformClass: function ${this.type} has not been implemented.`)}}}var v,d;v=new n(3),n!=Float32Array&&(v[0]=0,v[1]=0,v[2]=0),d=v;function g(t,e){let n=[];for(let a=0;a<4;++a){n[a]=0;for(let r=0;r<4;++r)n[a]+=t[r]*e[4*r+a]}return n}try{const n=function(t,e="webgl2",n){const a=document.getElementById(t);if(!a)throw new Error(`HelperFunctions-createGLContext-Error: Could not locate canvas element with id ${t}`);return{gl:a.getContext(e,n),canvas:a}}("my_canvas"),a=n.gl,r=n.canvas;a.enable(a.DEPTH_TEST),a.enable(a.CULL_FACE),a.depthFunc(a.LEQUAL),function(t){const e=t.clientWidth,n=t.clientHeight,a=t.width!==e||t.height!==n;a&&(t.width=e,t.height=n)}(r),a.viewport(0,0,a.canvas.width,a.canvas.height);const c=l(a,a.VERTEX_SHADER,"#version 300 es\n\nin vec4 a_position_v4;\nin vec3 a_normal_v3;\n\nuniform mat4 u_trsViewPerspective_m4; // translate/rotate/scale matrix * view_m4 * perspective_m4\nuniform mat4 u_trsInverseTranspose_m4; // transpose(inverse(translate/rotate/scale matrix))\n\nout vec3 v_normal_v3;\n\nvoid main() {\n  // Multiply the position by the matrix\n  gl_Position = u_trsViewPerspective_m4 * a_position_v4;\n\n  // Orient the normals and pass to the fragment shader\n  v_normal_v3 = mat3(u_trsInverseTranspose_m4) * a_normal_v3;\n}"),u=l(a,a.FRAGMENT_SHADER,"#version 300 es\n\nprecision highp float;\n\n// Passed in from the vertex shader\nin vec3 v_normal_v3;\nout vec4 outColor_v4;\n\nuniform vec3 u_reverseLightDirection_v3;\nuniform vec4 u_color_v4;\n\nvoid main() {\n  // Because v_normal is a varying it's interpolated,\n  //   so it will not be a unit vector.  Normalizing\n  //   it will make it a unit vector again.\n  vec3 normal_v3 = normalize(v_normal_v3);\n\n  float light_f = dot(normal_v3, u_reverseLightDirection_v3);\n\n  outColor_v4 = u_color_v4;\n\n  // Lets multiply just the color portion (not the alpha)\n  //   by the light.\n  outColor_v4.rgb *= light_f;\n}"),v=function(t,e,n){const a=t.createProgram();if(t.attachShader(a,e),t.attachShader(a,n),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS))return a;{const e=t.getProgramInfoLog(a);throw t.deleteProgram(a),new Error(`HelperFunctions-createProgram-Error: ${e}`)}}(a,c,u);a.useProgram(v);const d=a.FLOAT,E=new m(a,d,v,"a_position_v4"),A=h.getXYZRotationMatrix("x",180);s(A,A,h.getTranslationMatrix([-50,-75,-15]));for(let e=0;e<t.length;e+=3){const n=g([t[e],t[e+1],t[e+2],1],A);t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2]}E.setData(t,a.STATIC_DRAW);const L=a.FLOAT,M=new m(a,L,v,"a_normal_v3");M.setData(e,a.STATIC_DRAW);const B=a.createVertexArray();a.bindVertexArray(B);{const t=3,e=!1,n=0,a=0;E.bufferFormat(t,e,n,a)}{const t=3,e=!1,n=0,a=0;M.bufferFormat(t,e,n,a)}const w=new f(a,v,"u_trsViewPerspective_m4","uniformMatrix4fv"),b=new f(a,v,"u_trsInverseTranspose_m4","uniformMatrix4fv"),I=new f(a,v,"u_reverseLightDirection_v3","uniform3fv"),C=new Float32Array(3);!function(t,e){var n=e[0],a=e[1],r=e[2],o=n*n+a*a+r*r;o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o}(C,[.5,.7,1]),I.setData(C);new f(a,v,"u_color_v4","uniform4fv").setData([.2,1,.2,1]);const F=[0,0,200],R=[0,35,0],T=[0,1,0],S=o();!function(t,e,n,a){var r=e[0],o=e[1],i=e[2],s=a[0],c=a[1],u=a[2],l=r-n[0],m=o-n[1],h=i-n[2],f=l*l+m*m+h*h;f>0&&(l*=f=1/Math.sqrt(f),m*=f,h*=f);var v=c*h-u*m,d=u*l-s*h,g=s*m-c*l;(f=v*v+d*d+g*g)>0&&(v*=f=1/Math.sqrt(f),d*=f,g*=f),t[0]=v,t[1]=d,t[2]=g,t[3]=0,t[4]=m*g-h*d,t[5]=h*v-l*g,t[6]=l*d-m*v,t[7]=0,t[8]=l,t[9]=m,t[10]=h,t[11]=0,t[12]=r,t[13]=o,t[14]=i,t[15]=1}(S,F,R,T);const D=o();i(D,S);const P=a.TRIANGLES,U=0,k=96;let Y=[0,0,0],z=[0,0,0],H=[1,1,1],O=100;const V=a.canvas.clientWidth/a.canvas.clientHeight,N=1,X=2e3;function _(){!function(t,e=[.9,.9,.9,1]){t.clearColor(e[0],e[1],e[2],e[3]),t.clearDepth(1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL)}(a);const t=h.getPerspectiveMatrix(O,V,N,X),e=o();s(e,t,D);const n=h.getTranslationMatrix(Y),r=h.getXYZRotationMatrix("x",z[0]),c=h.getXYZRotationMatrix("y",z[1]),u=h.getXYZRotationMatrix("z",z[2]),l=h.getScaleMatrix(H),m=o();s(m,n,r),s(m,m,c),s(m,m,u),s(m,m,l);const f=o();s(f,e,m),w.setData(f);const v=o();i(v,m);const d=o();!function(t,e){if(t===e){var n=e[1],a=e[2],r=e[3],o=e[6],i=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=a,t[9]=o,t[11]=e[14],t[12]=r,t[13]=i,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(d,v),b.setData(d),a.drawArrays(P,U,k)}function p(t,e){Y[t]=e,_()}function x(t,e){z[t]=e,_()}function y(t,e){H[t]=e,_()}const Z=document.getElementById("fieldOfView"),q=document.getElementById("fieldOfView_output");Z.step=.2,Z.min=1,Z.max=179,Z.value=O,q.textContent=O,Z.addEventListener("input",(()=>{const t=+Z.value;q.textContent=Z.value,O=t,_()}));const G=document.getElementById("x_translate"),W=document.getElementById("y_translate"),$=document.getElementById("z_translate"),Q=document.getElementById("x_translate_output"),j=document.getElementById("y_translate_output"),K=document.getElementById("z_translate_output");G.min=-200,G.max=200,G.step=2,G.value=Y[0],Q.textContent=Y[0],W.min=-200,W.max=200,W.step=2,W.value=Y[1],j.textContent=Y[1],$.min=-1e3,$.max=0,$.step=5,$.value=Y[2],K.textContent=Y[2],G.addEventListener("input",(()=>{const t=+G.value;Q.textContent=t,p(0,t)})),W.addEventListener("input",(()=>{const t=+W.value;j.textContent=t,p(1,t)})),$.addEventListener("input",(()=>{const t=+$.value;K.textContent=t,p(2,t)}));const J=document.getElementById("x_rotate"),tt=document.getElementById("y_rotate"),et=document.getElementById("z_rotate"),nt=document.getElementById("x_rotate_output"),at=document.getElementById("y_rotate_output"),rt=document.getElementById("z_rotate_output");J.step=tt.step=et.step=5,J.min=tt.min=et.min=0,J.max=tt.max=et.max=360,J.value=nt.textContent=z[0],tt.value=at.textContent=z[1],et.value=rt.textContent=z[2],J.addEventListener("input",(()=>{const t=+J.value;nt.textContent=t,x(0,t)})),tt.addEventListener("input",(()=>{const t=+tt.value;at.textContent=t,x(1,t)})),et.addEventListener("input",(()=>{const t=+et.value;rt.textContent=t,x(2,t)}));const ot=document.getElementById("x_scale"),it=document.getElementById("y_scale"),st=document.getElementById("z_scale"),ct=document.getElementById("x_scale_output"),ut=document.getElementById("y_scale_output"),lt=document.getElementById("z_scale_output");ot.step=it.step=st.step=.1,ot.min=it.min=st.min=-5,ot.max=it.max=st.max=5,ot.value=ct.textContent=H[0],it.value=ut.textContent=H[1],st.value=lt.textContent=H[2],ot.addEventListener("input",(()=>{const t=+ot.value;ct.textContent=t,y(0,t)})),it.addEventListener("input",(()=>{const t=+it.value;ut.textContent=t,y(1,t)})),st.addEventListener("input",(()=>{const t=+st.value;lt.textContent=t,y(2,t)})),_()}catch(t){console.log(t)}
//# sourceMappingURL=index.ba13ebd5.js.map
