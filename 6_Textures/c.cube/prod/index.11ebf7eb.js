const t=[-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5],e=[0,0,0,.5,.25,0,0,.5,.25,.5,.25,0,.25,0,.5,0,.25,.5,.25,.5,.5,0,.5,.5,.5,0,.5,.5,.75,0,.5,.5,.75,.5,.75,0,0,.5,.25,.5,0,1,0,1,.25,.5,.25,1,.25,.5,.25,1,.5,.5,.25,1,.5,1,.5,.5,.5,.5,.75,.5,.5,1,.5,1,.75,.5,.75,1];var r="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;var n=Math.PI/180;function i(t){return t*n}function a(){var t=new r(16);return r!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function o(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],c=e[5],h=e[6],u=e[7],l=e[8],f=e[9],g=e[10],m=e[11],v=e[12],_=e[13],d=e[14],E=e[15],T=r[0],A=r[1],x=r[2],R=r[3];return t[0]=T*n+A*s+x*l+R*v,t[1]=T*i+A*c+x*f+R*_,t[2]=T*a+A*h+x*g+R*d,t[3]=T*o+A*u+x*m+R*E,T=r[4],A=r[5],x=r[6],R=r[7],t[4]=T*n+A*s+x*l+R*v,t[5]=T*i+A*c+x*f+R*_,t[6]=T*a+A*h+x*g+R*d,t[7]=T*o+A*u+x*m+R*E,T=r[8],A=r[9],x=r[10],R=r[11],t[8]=T*n+A*s+x*l+R*v,t[9]=T*i+A*c+x*f+R*_,t[10]=T*a+A*h+x*g+R*d,t[11]=T*o+A*u+x*m+R*E,T=r[12],A=r[13],x=r[14],R=r[15],t[12]=T*n+A*s+x*l+R*v,t[13]=T*i+A*c+x*f+R*_,t[14]=T*a+A*h+x*g+R*d,t[15]=T*o+A*u+x*m+R*E,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var s=function(t,e,r,n,i){var a,o=1/Math.tan(e/2);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(n-i),t[10]=(i+n)*a,t[14]=2*i*n*a):(t[10]=-1,t[14]=-2*n),t};var c=function(t,e,r,n,i,a,o){var s=1/(e-r),c=1/(n-i),h=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*c,t[14]=(o+a)*h,t[15]=1,t};var h,u,l,f,g,m,v,_,d,E,T,A,x,R,b,L,M,w,D,y,U,p,F,S,B,I,P,C,N,G,X;class Y{constructor(t,e,r,n){this.gl=t,this.type=e,this.attributeLocation=this.gl.getAttribLocation(r,n),this.buffer=this.gl.createBuffer()}bufferFormat(t,e,r,n){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer),this.gl.vertexAttribPointer(this.attributeLocation,t,this.type,e,r,n),this.gl.enableVertexAttribArray(this.attributeLocation)}setData(t,e){switch(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer),this.type){case this.gl.FLOAT:this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(t),e);break;case this.gl.UNSIGNED_BYTE:this.gl.bufferData(this.gl.ARRAY_BUFFER,new Uint8Array(t),e)}}}class k{constructor(t){this.gl=t}setColor(t){const e=this.gl.createTexture();this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,new Uint8Array(t))}setImage(t,e){try{const r=this.gl.createTexture();this.gl.activeTexture(e),this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,new Uint8Array([0,0,255,255]));const n=new Image;n.addEventListener("load",(()=>{this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,n),this.gl.generateMipmap(this.gl.TEXTURE_2D)})),n.src=t}catch(t){throw new Error(`Texture2DClass fetch image error: ${t.message}`)}}}class O{static getOrthoMatrix(t,e,r,n,i,o){const s=a();return c(s,t,e,r,n,i,o),s}static getPerspectiveMatrix(t,e,r,n){const o=a();return s(o,i(t),e,r,n),o}static getTranslationMatrix(t){const e=a();var r,n;return n=t,(r=e)[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,e}static getXYZRotationMatrix(t,e){const r=a();var n,o,s,c;return"x"===t?(n=r,o=i(e),s=Math.sin(o),c=Math.cos(o),n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=c,n[6]=s,n[7]=0,n[8]=0,n[9]=-s,n[10]=c,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1):"y"===t?function(t,e){var r=Math.sin(e),n=Math.cos(e);t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(r,i(e)):"z"===t&&function(t,e){var r=Math.sin(e),n=Math.cos(e);t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(r,i(e)),r}static getScaleMatrix(t){const e=a();var r,n;return n=t,(r=e)[0]=n[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=n[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,e}}class H{constructor(t,e,r,n){this.gl=t,this.type=n,this.uniformLocation=t.getUniformLocation(e,r)}setData(...t){switch(this.type){case"uniform1f":this.gl.uniform1f(this.uniformLocation,t[0]);break;case"uniform2f":this.gl.uniform2f(this.uniformLocation,t[0],t[1]);break;case"uniform4f":this.gl.uniform4f(this.uniformLocation,t[0],t[1],t[2],t[3]);break;case"uniform2fv":this.gl.uniform2fv(this.uniformLocation,t[0]);break;case"uniform3fv":this.gl.uniform3fv(this.uniformLocation,t[0]);break;case"uniform4fv":this.gl.uniform4fv(this.uniformLocation,t[0]);break;case"uniformMatrix3fv":this.gl.uniformMatrix3fv(this.uniformLocation,!1,t[0]);break;case"uniformMatrix4fv":this.gl.uniformMatrix4fv(this.uniformLocation,!1,t[0]);break;default:throw new Error(`UniformClass: function ${this.type} has not been implemented.`)}}}function q(t,e,r){const n=t.createShader(e);t.shaderSource(n,r),t.compileShader(n);if(t.getShaderParameter(n,t.COMPILE_STATUS))return n;{const e=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error("createShader: "+e)}}try{const r=function(t,e="webgl2",r){const n=document.getElementById(t);if(!n)throw new Error(`createGLContext: Could not locate canvas element with id ${t}`);return{gl:n.getContext(e,r),canvas:n}}("my_canvas"),n=r.gl,i=r.canvas;n.enable(n.DEPTH_TEST),n.enable(n.CULL_FACE),n.depthFunc(n.LEQUAL),function(t){const e=t.clientWidth,r=t.clientHeight,n=t.width!==e||t.height!==r;n&&(t.width=e,t.height=r)}(i),n.viewport(0,0,n.canvas.width,n.canvas.height);const s=q(n,n.VERTEX_SHADER,"#version 300 es\n\nin vec4 a_position_v4;\nin vec2 a_texcoord_v2;\n\nuniform mat4 u_matrix_m4;\n\nout vec2 v_texcoord_v2;\n\nvoid main() {\n  // Multiply the position by the matrix\n  gl_Position = u_matrix_m4 * a_position_v4;\n\n  // Pass the texcoord to the fragment shader\n  v_texcoord_v2 = a_texcoord_v2;\n}"),c=q(n,n.FRAGMENT_SHADER,"#version 300 es\n\nprecision highp float;\n\n// Passed in from the vertex shader\nin vec2 v_texcoord_v2;\n\n// The texture\nuniform sampler2D u_texture;\n\n// Output for fragment shader\nout vec4 outColor_v4;\n\nvoid main() {\n  outColor_v4 = texture(u_texture, v_texcoord_v2);\n}"),W=function(t,e,r){const n=t.createProgram();if(t.attachShader(n,e),t.attachShader(n,r),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS))return n;{const e=t.getProgramInfoLog(n);throw t.deleteProgram(n),new Error("createProgram: "+e)}}(n,s,c);n.useProgram(W);const Z=n.FLOAT,$=new Y(n,Z,W,"a_position_v4");$.setData(t,n.STATIC_DRAW);const j=n.FLOAT,z=new Y(n,j,W,"a_texcoord_v2");z.setData(e,n.STATIC_DRAW);const K=n.createVertexArray();n.bindVertexArray(K);{const t=3,e=!1,r=0,n=0;$.bufferFormat(t,e,r,n)}{const t=2,e=!0,r=0,n=0;z.bufferFormat(t,e,r,n)}new k(n,n.TEXTURE0+0).setImage("./noodles.jpg",n.TEXTURE0+0);const Q=new H(n,W,"u_matrix_m4","uniformMatrix4fv"),J=n.TRIANGLES,tt=0,et=36;let rt=0,nt=0;const it=10.2;let at=0;const ot=60,st=n.canvas.clientWidth/n.canvas.clientHeight,ct=1,ht=2e3,ut=O.getPerspectiveMatrix(ot,st,ct,ht),lt=[0,0,2],ft=[0,1,0],gt=[0,0,0],mt=a();!function(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=n[0],c=n[1],h=n[2],u=i-r[0],l=a-r[1],f=o-r[2],g=u*u+l*l+f*f;g>0&&(u*=g=1/Math.sqrt(g),l*=g,f*=g);var m=c*f-h*l,v=h*u-s*f,_=s*l-c*u;(g=m*m+v*v+_*_)>0&&(m*=g=1/Math.sqrt(g),v*=g,_*=g),t[0]=m,t[1]=v,t[2]=_,t[3]=0,t[4]=l*_-f*v,t[5]=f*m-u*_,t[6]=u*v-l*m,t[7]=0,t[8]=u,t[9]=l,t[10]=f,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1}(mt,lt,gt,ft);const vt=a();h=vt,l=(u=mt)[0],f=u[1],g=u[2],m=u[3],v=u[4],_=u[5],d=u[6],E=u[7],T=u[8],A=u[9],x=u[10],R=u[11],b=u[12],L=u[13],M=u[14],w=u[15],(X=(D=l*_-f*v)*(G=x*w-R*M)-(y=l*d-g*v)*(N=A*w-R*L)+(U=l*E-m*v)*(C=A*M-x*L)+(p=f*d-g*_)*(P=T*w-R*b)-(F=f*E-m*_)*(I=T*M-x*b)+(S=g*E-m*d)*(B=T*L-A*b))&&(X=1/X,h[0]=(_*G-d*N+E*C)*X,h[1]=(g*N-f*G-m*C)*X,h[2]=(L*S-M*F+w*p)*X,h[3]=(x*F-A*S-R*p)*X,h[4]=(d*P-v*G-E*I)*X,h[5]=(l*G-g*P+m*I)*X,h[6]=(M*U-b*S-w*y)*X,h[7]=(T*S-x*U+R*y)*X,h[8]=(v*N-_*P+E*B)*X,h[9]=(f*P-l*N-m*B)*X,h[10]=(b*F-L*U+w*D)*X,h[11]=(A*U-T*F-R*D)*X,h[12]=(_*I-v*C-d*B)*X,h[13]=(l*C-f*I+g*B)*X,h[14]=(L*y-b*p-M*D)*X,h[15]=(T*p-A*y+x*D)*X);const _t=a();function V(t){const e=(t*=.001)-at;at=t,function(t,e=[0,0,0,1]){t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.clearColor(e[0],e[1],e[2],e[3]),t.clearDepth(1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}(n),rt+=1.2*it*e,nt+=it*e;const r=O.getXYZRotationMatrix("x",rt),i=O.getXYZRotationMatrix("y",nt),s=a();o(s,_t,r),o(s,s,i),Q.setData(s),n.drawArrays(J,tt,et),requestAnimationFrame(V)}o(_t,ut,vt),window.requestAnimationFrame(V)}catch(t){console.log(t)}
//# sourceMappingURL=index.11ebf7eb.js.map
